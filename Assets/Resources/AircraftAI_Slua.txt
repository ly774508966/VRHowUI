
import "UnityEngine"
import "MyAeroplaneAiControl"

if not UnityEngine.GameObject or not  UnityEngine.UI then
	error("Click Make/All to generate lua wrap file")
end

local aiComponent = {}

local player
local controller
local target

function aiComponent:Init( gameObject )
	Debug.Log(gameObject.name.."###Init")

	player = GameObject.Find("AircraftJet_LOD")
    controller = gameObject:GetComponent("MyAeroplaneAiControl")
end

function aiComponent:Awake( gameObject )
	Debug.Log(gameObject.name.."###Awake")
end

function aiComponent:Start( gameObject )
	Debug.Log(gameObject.name.."###Start")
end

function aiComponent:Update( gameObject )
    Debug.Log(gameObject.name.."###Update")
	-- print("player.transform ", player.transform.position.x, player.transform.position.y, player.transform.position.z)

	if target then
	   local distance = Vector3.Distance(gameObject.transform.position, target.position)
	   if (distance < 5) then
	       target = player.transform;
	       controller:SetTarget(player.transform)
	   end
	else
	   target = player.transform;
	   controller:SetTarget(player.transform)
	end
end

function main ()
    return aiComponent
end

return aiComponent
